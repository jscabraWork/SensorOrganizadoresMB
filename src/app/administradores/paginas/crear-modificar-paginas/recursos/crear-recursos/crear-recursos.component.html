<!-- crear-recursos.component.html -->
<section class="crear-recursos">
  <!-- Tabs -->
  <div class="tabs">
    <button 
      class="tab" 
      [class.active]="modo === 'archivo'"
      (click)="cambiarModo('archivo')">
      Archivo
    </button>
    <button 
      class="tab" 
      [class.active]="modo === 'url'"
      (click)="cambiarModo('url')">
      URL
    </button>
  </div>

  <!-- Crear por URL -->
  <div class="form-url" *ngIf="modo === 'url'">
    <input 
      type="url" 
      [(ngModel)]="nuevoRecurso.url" 
      placeholder="https://ejemplo.com/imagen.jpg"
      class="input">
    
    <input 
      type="text" 
      [(ngModel)]="nuevoRecurso.nombre" 
      placeholder="Nombre del recurso"
      class="input">
    
    <select [(ngModel)]="nuevoRecurso.tipo" class="select" [disabled]="tipoRecurso !== -1">
      <option value="0">Imagen</option>
      <option value="1">Video</option>
    </select>
    
    <input 
      type="text" 
      [(ngModel)]="nuevoRecurso.formato" 
      placeholder="Formato (opcional): jpg, mp4, etc."
      class="input">
    
    <button class="btn-crear" (click)="crearPorUrl()">
      Crear recurso
    </button>
  </div>

  <!-- Crear por archivo -->
  <div class="form-archivo" *ngIf="modo === 'archivo'">
    <!-- Drop zone -->
    <div 
      class="drop-zone" 
      [class.active]="dragging"
      (dragover)="onDragOver($event)"
      (dragleave)="onDragLeave($event)"
      (drop)="onDrop($event)">
      
      <div class="drop-content">
        <p>
          {{ tipoRecurso === 0 ? 'Arrastra imágenes aquí' : 
             tipoRecurso === 1 ? 'Arrastra videos aquí' : 
             'Arrastra archivos aquí' }}
        </p>
        <button class="btn-select" (click)="seleccionarArchivos()">
          Seleccionar archivos
        </button>
        <input 
          #fileInput
          type="file" 
          multiple 
          [accept]="tipoRecurso === 0 ? 'image/*' : 
                    tipoRecurso === 1 ? 'video/*' : 
                    'image/*,video/*'" 
          (change)="onFileSelect($event)" 
          style="display: none">
      </div>
    </div>

    <!-- Lista de archivos -->
    <div class="archivos-lista" *ngIf="archivos.length > 0">
      <div class="lista-header">
        <h4>Archivos ({{ archivos.length }})</h4>
        <button 
          class="btn-subir"
          [disabled]="subiendo || !paginaId" 
          (click)="subirArchivos()">
          {{ subiendo ? 'Subiendo...' : 'Subir archivos' }}
        </button>
      </div>

      <div class="archivo-item" *ngFor="let archivo of archivos; let i = index">

        <div class="archivo-info">
          <div class="archivo-nombre">{{ archivo.name }}</div>
          <div class="archivo-size">{{ formatearTamano(archivo.size) }}</div>
        </div>
        <button 
          class="btn-remove"
          (click)="eliminarArchivo(i)" 
          *ngIf="!subiendo">
          ×
        </button>
      </div>
    </div>
  </div>
</section>