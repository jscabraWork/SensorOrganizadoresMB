@use '../../../../../styles/variables' as v;
@use '../../../../../styles/mixins' as m;

.resumen-container {
  padding: v.$spacer-3;
}

.loading-container {
  display: flex;
  justify-content: center;
  align-items: center;
  height: 300px;
}

.error-container {
  text-align: center;
  padding: v.$spacer-4;
  
  .error-message {
    color: v.$color-error;
    margin-bottom: v.$spacer-3;
    font-size: 1.1rem;
  }
}

.content-container {
  max-width: 1200px;
  margin: 0 auto;
}

// Cards de resumen
.resumen-cards {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
  gap: v.$spacer-3;
  margin-bottom: v.$spacer-4;
  
  .card {
    @include m.card(2);
    padding: v.$spacer-4;
    text-align: center;
    
    h3 {
      font-family: v.$font-secondary;
      font-size: 1rem;
      color: v.$color-gris;
      margin: 0 0 v.$spacer-2 0;
      font-weight: 500;
    }
    
    .metric {
      font-size: 2rem;
      font-weight: 700;
      color: v.$color-base;
      margin: 0;
      font-family: v.$font-primary;
    }
  }
}

// Desglose Financiero
.desglose-financiero {
  margin-bottom: v.$spacer-4;
  
  .desglose-section {
    @include m.card(1);
    padding: v.$spacer-4;
    margin-bottom: v.$spacer-3;
    
    h3 {
      font-family: v.$font-secondary;
      color: v.$color-base;
      margin: 0 0 v.$spacer-1 0;
      font-size: 1.1rem;
      border-bottom: 2px solid v.$color-primario;
      padding-bottom: v.$spacer-1;
    }
    
    .section-description {
      font-size: 0.8rem;
      color: v.$color-gris;
      font-family: v.$font-primary;
      margin: 0 0 v.$spacer-3 0;
      font-style: italic;
    }
    
    .desglose-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
      gap: v.$spacer-2;
      
      .desglose-item {
        display: flex;
        justify-content: space-between;
        align-items: center;
        padding: v.$spacer-2;
        background-color: v.$color-gris-muy-light;
        border-radius: v.$border-radius;
        border-left: 3px solid v.$color-primario;
        
        .label {
          font-weight: 600;
          color: v.$color-base;
          font-family: v.$font-primary;
        }
        
        .value {
          font-weight: 700;
          color: v.$color-negro;
          font-family: v.$font-primary;
          text-align: right;
        }
      }
      
      .total-item {
        background-color: v.$color-primario;
        border-left: 3px solid v.$color-primario-dark;
        
        .label, .value {
          color: v.$color-negro;
          font-weight: 700;
        }
      }
    }
  }
}

// Filtros
.filtros-container {
  @include m.card(1);
  padding: v.$spacer-4;
  margin-bottom: v.$spacer-4;
  
  h3 {
    font-family: v.$font-secondary;
    color: v.$color-base;
    margin: 0 0 v.$spacer-3 0;
    font-size: 1.2rem;
  }
  
  .filtros-form {
    display: flex;
    gap: v.$spacer-4;
    flex-wrap: wrap;
    
    .input-group {
      display: flex;
      flex-direction: column;
      gap: v.$spacer-1;
      min-width: 150px;
      
      label {
        font-family: v.$font-primary;
        font-weight: 600;
        color: v.$color-base;
        font-size: 0.9rem;
      }
      
      select {
        @include m.form-input;
        padding: v.$spacer-2;
        font-size: 0.9rem;
      }
    }
  }
}

// Gr�ficas
.graficas-container {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(400px, 1fr));
  gap: v.$spacer-4;
  
  .grafica-section {
    @include m.card(1);
    padding: v.$spacer-4;
    
    h3 {
      font-family: v.$font-secondary;
      color: v.$color-base;
      margin: 0 0 v.$spacer-3 0;
      font-size: 1.1rem;
      border-bottom: 2px solid v.$color-primario;
      padding-bottom: v.$spacer-1;
    }
  }
}

// Contenedores de gráficas Chart.js
.chart-container {
  position: relative;
  height: 300px;
  width: 100%;
  margin-top: v.$spacer-2;
  
  canvas {
    max-height: 300px !important;
  }
}

.no-data {
  text-align: center;
  color: v.$color-gris;
  font-style: italic;
  padding: v.$spacer-4;
  margin: 0;
}

// Gr�fica circular (progress bars)
.grafica-circular {
  .metodo-item {
    margin-bottom: v.$spacer-3;
    
    .metodo-info {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: v.$spacer-1;
      
      .metodo-nombre {
        font-weight: 600;
        color: v.$color-base;
        text-transform: capitalize;
      }
      
      .metodo-valor {
        font-weight: 700;
        color: v.$color-primario;
        font-family: v.$font-primary;
      }
    }
    
    .progress-bar {
      height: 8px;
      background-color: v.$color-gris-muy-light;
      border-radius: 4px;
      overflow: hidden;
      
      .progress-fill {
        height: 100%;
        background: linear-gradient(90deg, v.$color-primario, v.$color-primario-light);
        transition: width 0.3s ease;
      }
    }
  }
}

// Gr�fica de l�neas (lista)
.grafica-lineas {
  .periodo-item {
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: v.$spacer-2;
    border-bottom: 1px solid v.$color-gris-muy-light;
    
    &:last-child {
      border-bottom: none;
    }
    
    .periodo-info {
      display: flex;
      gap: v.$spacer-3;
      align-items: center;
      width: 100%;
      
      .periodo-nombre {
        font-weight: 600;
        color: v.$color-base;
        min-width: 100px;
      }
      
      .periodo-recaudado {
        font-weight: 700;
        color: v.$color-primario;
        font-family: v.$font-primary;
        flex: 1;
      }
      
      .periodo-asistentes {
        color: v.$color-gris;
        font-size: 0.9rem;
        min-width: 100px;
        text-align: right;
      }
    }
  }
}

// Responsive
@include m.for-tablet-down {
  .resumen-cards {
    grid-template-columns: repeat(auto-fit, minmax(180px, 1fr));
    gap: v.$spacer-2;
  }
  
  .desglose-financiero {
    .desglose-section {
      .desglose-grid {
        grid-template-columns: 1fr;
        
        .desglose-item {
          padding: v.$spacer-1 v.$spacer-2;
          
          .label, .value {
            font-size: 0.9rem;
          }
          
          &.total-item {
            background-color: v.$color-primario;
            border-left: 3px solid v.$color-primario-dark;
            
            .label, .value {
              color: v.$color-negro;
              font-weight: 700;
            }
          }
        }
      }
    }
  }
  
  .filtros-form {
    flex-direction: column;
    gap: v.$spacer-2;
  }
  
  .graficas-container {
    grid-template-columns: 1fr;
    gap: v.$spacer-3;
  }
}

@include m.for-mobile-down {
  .resumen-container {
    padding: v.$spacer-2;
  }
  
  .resumen-cards {
    grid-template-columns: 1fr;
    
    .card {
      padding: v.$spacer-3;
      
      .metric {
        font-size: 1.5rem;
      }
    }
  }
  
  .grafica-lineas {
    .periodo-item {
      .periodo-info {
        flex-direction: column;
        align-items: flex-start;
        gap: v.$spacer-1;
        
        .periodo-asistentes {
          text-align: left;
        }
      }
    }
  }
}

// Estilos para filtros integrados
.graficas-y-filtros-container {
  @include m.card(1);
  padding: v.$spacer-4;
  margin-bottom: v.$spacer-4;
}

.filtros-integrados {
  margin-bottom: v.$spacer-4;
  
  .filtros-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    flex-wrap: wrap;
    gap: v.$spacer-3;
    padding-bottom: v.$spacer-3;
    border-bottom: 2px solid v.$color-primario;
    
    h3 {
      font-family: v.$font-secondary;
      color: v.$color-base;
      margin: 0;
      font-size: 1.3rem;
      font-weight: 700;
    }
    
    .filtros-controls {
      display: flex;
      gap: v.$spacer-3;
      align-items: center;
      
      .filtro-item {
        display: flex;
        align-items: center;
        gap: v.$spacer-1;
        
        label {
          font-family: v.$font-primary;
          font-weight: 600;
          color: v.$color-base;
          font-size: 0.9rem;
          white-space: nowrap;
        }
        
        select {
          padding: v.$spacer-1 v.$spacer-2;
          border: 2px solid v.$color-gris-light;
          border-radius: v.$border-radius;
          background-color: v.$color-blanco;
          color: v.$color-base;
          font-family: v.$font-primary;
          font-size: 0.9rem;
          font-weight: 500;
          min-width: 90px;
          transition: all 0.3s ease;
          
          &:focus {
            outline: none;
            border-color: v.$color-primario;
            box-shadow: 0 0 0 3px rgba(v.$color-primario, 0.2);
          }
          
          &:hover {
            border-color: v.$color-primario-light;
          }
        }
      }
    }
  }
}

// Responsive para nuevos filtros integrados
@media (max-width: 870px) {
  .filtros-integrados {
    .filtros-header {
      flex-direction: column;
      align-items: flex-start;
      gap: v.$spacer-2;
      
      .filtros-controls {
        gap: v.$spacer-2;
        flex-wrap: wrap;
      }
    }
  }
}

@media (max-width: 520px) {
  .filtros-integrados {
    .filtros-header {
      .filtros-controls {
        flex-direction: column;
        align-items: stretch;
        width: 100%;
        
        .filtro-item {
          justify-content: space-between;
          
          select {
            min-width: 120px;
          }
        }
      }
    }
  }
}